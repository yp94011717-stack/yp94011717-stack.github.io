<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‰¦éšŠåˆ†ç½²é˜²è²ªæŒ‡å¼•æ‰‹å†Šå°æ¸¬é©—</title>
    <style>
        :root {
            --navy: #003366;
            --cg-orange: #ff6600;
            --white: #ffffff;
            --gray: #f4f4f4;
            --success: #28a745;
            --danger: #dc3545;
            --info: #17a2b8;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--navy);
            color: #333;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        #game-box {
            background-color: var(--white);
            width: 95%;
            max-width: 700px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            z-index: 10;
            transition: all 0.5s ease;
        }

        h1 { color: var(--navy); margin-bottom: 5px; font-size: 1.8rem; }
        .subtitle { color: #666; font-size: 1rem; margin-bottom: 30px; }

        .hidden { display: none !important; }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            background-color: var(--cg-orange);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.3s;
            margin: 5px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover { transform: scale(1.05); background-color: #e65c00; }
        .btn-secondary { background-color: var(--navy); }
        .btn-next { background-color: var(--info); margin-top: 15px; }

        /* åœ–ç‰‡æ’­æ”¾å™¨ */
        #slideshow-container { position: relative; width: 100%; min-height: 300px; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; }
        .slide-img { max-width: 100%; max-height: 400px; border-radius: 10px; display: none; border: 3px solid var(--navy); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .slide-counter { margin-bottom: 15px; font-weight: bold; color: var(--navy); font-size: 1.2rem; }
        .nav-controls { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }

        /* é¡Œç›®å€ */
        #question-area { text-align: left; }
        .q-text { font-size: 1.2rem; font-weight: bold; margin-bottom: 20px; color: var(--navy); line-height: 1.5; }
        .options { display: grid; gap: 12px; }
        .option-btn {
            background: var(--gray);
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: 0.2s;
            font-size: 1.1rem;
            line-height: 1.4;
        }
        .option-btn:hover:not(:disabled) { background: #e8e8e8; border-color: var(--cg-orange); }
        .option-btn:disabled { cursor: default; }

        /* è§£æå€ */
        #explanation-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            background-color: #fff3cd;
            border: 2px solid #ffeeba;
            display: none;
        }
        .expl-title { font-weight: bold; color: #856404; margin-bottom: 5px; display: block; }
        .expl-content { font-size: 1rem; color: #533f03; }

        /* ç‰¹æ•ˆå±¤ */
        #effect-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10rem;
        }

        .explode { animation: explodeAnim 0.6s ease-out forwards; }
        @keyframes explodeAnim {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.8); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .clap { animation: clapAnim 0.8s ease-in-out infinite; }
        @keyframes clapAnim {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        /* éŠæˆ²èƒŒæ™¯æ•ˆæœ */
        .pass-screen { background: linear-gradient(135deg, #ffffff 0%, #e8f5e9 100%) !important; }
        .fail-screen { background: #2c3e50 !important; color: white !important; }
        .fail-screen h1, .fail-screen .subtitle, .fail-screen .result-text { color: #ecf0f1 !important; }

        .result-text { font-size: 1.5rem; font-weight: bold; margin: 20px 0; }
        .score-circle {
            width: 150px; height: 150px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 3.5rem; font-weight: bold; margin: 20px auto;
            border: 8px solid;
        }

        /* æ…¶ç¥ç¢ç‰‡ */
        .confetti {
            position: absolute; width: 12px; height: 12px; 
            animation: confettiDrop 4s linear infinite;
        }
        @keyframes confettiDrop {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* éœ‡å‹•æ•ˆæœ */
        .shake { animation: shakeAnim 0.3s linear; }
        @keyframes shakeAnim {
            0% { transform: translate(0); }
            20% { transform: translate(-10px, 10px); }
            40% { transform: translate(10px, -10px); }
            60% { transform: translate(-10px, -10px); }
            80% { transform: translate(10px, 10px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body>

    <div id="effect-overlay"></div>

    <div id="game-box">
        <!-- åˆå§‹ç•«é¢ -->
        <div id="screen-start">
            <h1>è‰¦éšŠåˆ†ç½²<br>é˜²è²ªæŒ‡å¼•æ‰‹å†Šå°æ¸¬é©—</h1>
            <p class="subtitle">è‰¦éšŠåˆ†ç½²æ”¿é¢¨å®¤é—œå¿ƒæ‚¨</p>
            <div style="margin: 30px 0;">
                <span style="font-size: 5rem;">ğŸ›¡ï¸</span>
            </div>
            <button class="btn" onclick="startSlideshow()">é€²å…¥æ¸¬é©—å°è®€</button>
        </div>

        <!-- åœ–ç‰‡æ’­æ”¾ç•«é¢ -->
        <div id="screen-slides" class="hidden">
            <h2 style="color:var(--navy)">æŒ‡å¼•æ‰‹å†Šé‡é»å°è®€</h2>
            <div class="slide-counter"><span id="current-slide-num">1</span> / 7</div>
            <div id="slideshow-container">
                <img src="1.png" class="slide-img" alt="æ‰‹å†Š1" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+1'">
                <img src="2.png" class="slide-img" alt="æ‰‹å†Š2" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+2'">
                <img src="3.png" class="slide-img" alt="æ‰‹å†Š3" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+3'">
                <img src="4.png" class="slide-img" alt="æ‰‹å†Š4" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+4'">
                <img src="5.png" class="slide-img" alt="æ‰‹å†Š5" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+5'">
                <img src="6.png" class="slide-img" alt="æ‰‹å†Š6" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+6'">
                <img src="7.png" class="slide-img" alt="æ‰‹å†Š7" onerror="this.src='https://via.placeholder.com/600x400?text=æ‰‹å†Šå°è®€+7'">
            </div>
            
            <div class="nav-controls">
                <button id="prev-btn" class="btn btn-secondary" onclick="changeSlide(-1)">ä¸Šä¸€å¼µ</button>
                <button id="next-btn" class="btn" onclick="changeSlide(1)">ä¸‹ä¸€å¼µ</button>
            </div>
            <p style="color:#666; font-size: 0.9rem; margin-top: 15px;">è«‹æ‰‹å‹•åˆ‡æ›é–±è®€æ•™æå…§å®¹</p>
        </div>

        <!-- æ¸¬é©—é¡Œç›®ç•«é¢ -->
        <div id="screen-quiz" class="hidden">
            <div style="display:flex; justify-content: space-between; color: var(--navy); font-weight:bold; margin-bottom: 10px;">
                <span>é€²åº¦: <span id="q-progress">1</span> / 20</span>
                <span>å¾—åˆ†: <span id="current-score">0</span></span>
            </div>
            <div id="question-area">
                <p class="q-text" id="q-content">é¡Œç›®è¼‰å…¥ä¸­...</p>
                <div class="options" id="options-container"></div>
                <div id="explanation-box">
                    <span class="expl-title">ğŸ’¡ æ­£ç¢ºè§£æï¼š</span>
                    <p id="expl-text" class="expl-content"></p>
                </div>
                <div style="text-align:center;">
                    <button id="next-q-btn" class="btn btn-next hidden" onclick="proceedToNextQuestion()">ä¸‹ä¸€é¡Œ</button>
                </div>
            </div>
        </div>

        <!-- æˆç¸¾çµç®—ç•«é¢ -->
        <div id="screen-result" class="hidden">
            <h1>æ¸¬é©—çµæŸ</h1>
            <div id="score-circle" class="score-circle">0</div>
            <p id="result-message" class="result-text"></p>
            <div style="margin-top: 30px;">
                <button class="btn" onclick="retryQuiz()">å†è©¦ä¸€æ¬¡</button>
                <button class="btn btn-secondary" onclick="goHome()">çµæŸæ¸¬é©—</button>
            </div>
        </div>
    </div>

    <script>
        const questionsData = [
            { q: "æµ·å·¡åŒä»Aåœ¨æ¥å—è­¦æ–¹ç›¤æŸ¥æ™‚æ‹’æª¢é€ƒé€¸ï¼Œäº‹å¾Œç™¼ç¾å…¶è»Šå…§æœ‰ç¬¬äºŒç´šæ¯’å“ã€‚è«‹å•è‹¥æ–½ç”¨ã€Œç¬¬äºŒç´šæ¯’å“ã€ï¼ˆå¦‚å®‰éä»–å‘½ã€å¤§éº»ï¼‰ï¼Œä¾æ³•æ‡‰è™•ä»¥ä½•ç¨®åˆ‘è²¬ï¼Ÿ", a: "B", p: "æ ¹æ“šè³‡æ–™ï¼Œæ–½ç”¨ç¬¬äºŒç´šæ¯’å“è€…ï¼Œè™•3å¹´ä»¥ä¸‹æœ‰æœŸå¾’åˆ‘ã€‚", o: { A: "6å€‹æœˆä»¥ä¸Š5å¹´ä»¥ä¸‹æœ‰æœŸå¾’åˆ‘", B: "3å¹´ä»¥ä¸‹æœ‰æœŸå¾’åˆ‘", C: "1è¬å…ƒä»¥ä¸Š5è¬å…ƒä»¥ä¸‹ç½°é°", D: "åƒ…éœ€æ¥å—æ¯’å“å±å®³è¬›ç¿’" } },
            { q: "é—œæ–¼æ¥è§¸æ¯’å“çš„é¢¨éšªè©•ä¼°ï¼Œä¸‹åˆ—å“ªé …æ˜¯åŒä»èª¤å…¥æ­§é€”æ–½ç”¨æ¯’å“çš„å¸¸è¦‹åŸå› ï¼Ÿ", a: "B", p: "å¸¸è¦‹åŸå› ç‚ºèª¤åˆ¤æ¯’å“æˆç™®æ€§ï¼Œèªç‚ºè©¦ä¸€æ¬¡æ²’é—œä¿‚ï¼Œå°è‡´è¼•æ˜“å˜—è©¦è€Œé™·å…¥æ¯’ç™®ã€‚", o: { A: "åƒåŠ å…¬å‹™å“¡æ³•æ²»æ•™è‚²", B: "èª¤åˆ¤æ¯’å“æˆç™®æ€§ï¼Œè¼•æ˜“å˜—è©¦", C: "å°‹æ±‚æ­£ç•¶ç´“å£“ç®¡é“", D: "æ‹’çµ•é™Œç”Ÿäººçš„é£²æ–™" } },
            { q: "é‡åˆ°ç¶²å‹ä»¥æ•£å¸ƒç§å¯†å½±åƒé€²è¡Œå‹’ç´¢ï¼ˆæ€§å‹’ç´¢ï¼‰æ™‚ï¼Œä¸‹åˆ—å“ªé …æ‡‰è™•ç¨‹åºæ˜¯éŒ¯èª¤çš„ï¼Ÿ", a: "B", p: "æ‡‰è™•ç¨‹åºå¼·èª¿è¦ã€Œå®Œæ•´ä¿å­˜è­‰æ“šã€ï¼Œç«‹å³æˆªåœ–æˆ–å‚™ä»½å°è©±ç´€éŒ„ï¼Œä»¥åˆ©å¾ŒçºŒå ±æ¡ˆèˆ‡èª¿æŸ¥ï¼Œçµ•ä¸å¯åˆªé™¤ã€‚", o: { A: "ä¿æŒå†·éœï¼Œåˆ‡å‹¿å¦¥å”", B: "ç«‹å³åˆªé™¤æ‰€æœ‰å°è©±ç´€éŒ„ä»¥æ¶ˆæ»…è­‰æ“š", C: "å®Œæ•´ä¿å­˜è­‰æ“šï¼ˆæˆªåœ–ï¼‰", D: "ç«‹å³é€šå ±èˆ‡æ±‚åŠ©ï¼ˆå‘å–®ä½ä¸»ç®¡åŠæ”¿é¢¨å®¤å ±å‘Šï¼‰" } },
            { q: "ç‚ºäº†å¼·åŒ–å€‹äººè³‡å®‰æ„è­˜ï¼Œé¿å…è½å…¥ç¶²è·¯é™·é˜±ï¼Œä¸‹åˆ—è¡Œç‚ºä½•è€…æ­£ç¢ºï¼Ÿ", a: "C", p: "é˜²æ²»æªæ–½æŒ‡å‡ºæ‡‰ã€Œçµ•å°ç¦æ­¢å‚³é€ä»»ä½•ç§å¯†å½±åƒã€ï¼Œä¸¦é¿å…å¼µè²¼èˆ‡å…¬å‹™ç›¸é—œä¹‹åœ–æ–‡ã€‚", o: { A: "åœ¨ç¤¾ç¾¤åª’é«”å¼µè²¼ç©¿è‘—åˆ¶æœçš„ç…§ç‰‡ä»¥å±•ç¾å¸¥æ°£", B: "éš¨æ„èˆ‡ç¶²å‹åˆ†äº«æœå‹™å–®ä½è³‡è¨Š", C: "çµ•å°ç¦æ­¢å‚³é€ä»»ä½•ç§å¯†å½±åƒ", D: "ç‚ºäº†å®‰æ’«ç¶²å‹æƒ…ç·’å¯ä»¥å¶çˆ¾å‚³é€ä¸é›…ç…§" } },
            { q: "æµ·å·¡åŒä»åœ¨å–®ä½åˆ©ç”¨å…¬å®¶é›»è…¦æˆ–è‡ªå‚™é›»è…¦ï¼Œä½¿ç”¨BTè»Ÿé«”ä¸‹è¼‰é›»å½±ï¼Œé™¤äº†é•åè¡Œæ”¿è¦å®šå¤–ï¼Œæœ€ä¸»è¦æ¶‰åŠé•åä»€éº¼æ³•å¾‹ï¼Ÿ", a: "B", p: "åˆ©ç”¨BTè»Ÿé«”ä¸‹è¼‰é›»å½±ï¼Œæ¶‰å«Œé•åè‘—ä½œæ¬Šæ³•ä¹‹é‡è£½èˆ‡æ•£å¸ƒã€‚", o: { A: "åœ‹å®¶å®‰å…¨æ³•", B: "è‘—ä½œæ¬Šæ³•", C: "æ¯’å“å±å®³é˜²åˆ¶æ¢ä¾‹", D: "éŠ€è¡Œæ³•" } },
            { q: "ç‚ºé¿å…å…¬å‹™è³‡æ–™å¤–æ´©ï¼ŒåŒä»å€‹äººé›»è…¦ä¸­æ‡‰å¦‚ä½•è™•ç†å…¬å‹™è³‡æ–™ï¼Ÿ", a: "A", p: "åŒä»å€‹äººé›»è…¦ä¸­æ‡‰ç„¡å…¬å‹™è³‡æ–™èˆ‡æª”æ¡ˆï¼Œä¸”ä»æ‡‰é¿å…ä½¿ç”¨æ­¤é¡è»Ÿé«”ï¼Œä»¥å…é€ æˆè³‡å®‰å¤–æ´©ã€‚", o: { A: "æ‡‰ç„¡å…¬å‹™è³‡æ–™èˆ‡æª”æ¡ˆï¼Œä¸”ä»æ‡‰é¿å…ä½¿ç”¨BTé¡è»Ÿé«”", B: "å¯ä»¥å­˜æ”¾ä½†ä¸å¯ä»¥åŠ å¯†", C: "åªè¦å®‰è£é˜²æ¯’è»Ÿé«”å°±å¯ä»¥éš¨æ„å­˜æ”¾", D: "å­˜æ”¾åœ¨Dæ§½å³å¯" } },
            { q: "åŒä»Aæ´¾é§èˆ¹å» ç›£å·¥ï¼Œæ¯æ—¥ææ—©æ–¼18æ™‚é›¢é–‹ï¼Œå»åœ¨ç°½åˆ°ç°¿å¡«å¯«20æ™‚é€€å‹¤ã€‚æ­¤è¡Œç‚ºè§¸çŠ¯åˆ‘æ³•ç¬¬213æ¢ä»€éº¼ç½ªåï¼Ÿ", a: "B", p: "æ˜çŸ¥æœªæœå‹¤æ™‚é–“å»ç™»è¼‰æ–¼å‡ºå…¥ç™»è¨˜ç°¿ï¼Œè§¸çŠ¯åˆ‘æ³•ç¬¬213æ¢å…¬å‹™å“¡ç™»è¼‰ä¸å¯¦ç½ªã€‚", o: { A: "ç«Šç›œç½ª", B: "å…¬å‹™å“¡ç™»è¼‰ä¸å¯¦ç½ª", C: "ä¾µå ç½ª", D: "æ¯€æå…¬ç‰©ç½ª" } },
            { q: "é—œæ–¼åŠ ç­æ™‚æ®µçš„å¤–å‡ºè¦å®šï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", a: "B", p: "å¦‚éœ€å¤–å‡ºæ‡‰å…ˆå–å¾—ä¸»ç®¡åŒæ„æˆ–ä¾è¦å®šè¾¦ç†è«‹å‡æˆ–ç™»è¨˜ï¼Œä¸å¯æ“…è‡ªé›¢é–‹ã€‚", o: { A: "åªè¦è‚šå­é¤“å°±å¯ä»¥éš¨æ™‚å¤–å‡ºè²·æ™šé¤ï¼Œä¸ç”¨è«‹å‡", B: "ä¾è¦å®šéœ€å…ˆå–å¾—ä¸»ç®¡åŒæ„æˆ–ä¾è¦å®šè«‹å‡ï¼ˆåˆ·å¡/ç™»è¨˜ï¼‰", C: "åªè¦äº‹å¾Œå£é ­å ±å‘Šå³å¯", D: "åŠ ç­æ™‚é–“å±¬æ–¼ç§äººæ™‚é–“ï¼Œå¯è‡ªç”±é€²å‡º" } },
            { q: "åŒä»é­é‡è©é¨™å¾Œï¼Œè‹¥åƒ…å‘æ´¾å‡ºæ‰€å‚™æ¡ˆè€Œæœªå‘æ©Ÿé—œå›å ±ï¼Œå¯èƒ½æœƒé€ æˆä»€éº¼é¢¨éšªï¼Ÿ", a: "A", p: "é˜²æ²»æªæ–½å¼·èª¿å‹™å¿…å‘éšŠéƒ¨é€šå ±ï¼Œä»¥åˆ©æ©Ÿé—œæä¾›åŠæ™‚å”åŠ©ï¼Œé¿å…äºŒæ¬¡é­å—è©é¨™ã€‚", o: { A: "æ©Ÿé—œç„¡æ³•åŠæ™‚æä¾›å”åŠ©èˆ‡é˜²è©è­¦ç¤º", B: "å¯ä»¥ä¿è­·å€‹äººéš±ç§", C: "æ´¾å‡ºæ‰€æœƒå„ªå…ˆè™•ç†", D: "æ­¹å¾’æœƒè‡ªå‹•é€€æ¬¾" } },
            { q: "åŒä»å°‡éŠ€è¡Œå¸³æˆ¶æä¾›çµ¦è©é¨™é›†åœ˜ä½¿ç”¨ï¼Œå°è‡´å¸³æˆ¶è¢«åˆ—ç‚ºã€Œè­¦ç¤ºå¸³æˆ¶ã€ï¼Œé€™é€šå¸¸æ„å‘³è‘—åŒä»å¯èƒ½æ¶‰å«Œæˆç‚ºä»€éº¼è§’è‰²ï¼Ÿ", a: "B", p: "æä¾›å¸³æˆ¶ä¾›è©åœ˜ä½¿ç”¨ï¼Œå¯èƒ½æ¶‰å«Œæˆç‚ºè©é¨™é›†åœ˜å…±çŠ¯ï¼ˆäººé ­å¸³æˆ¶ï¼‰ã€‚", o: { A: "æ™®é€šè€ç™¾å§“", B: "è©é¨™é›†åœ˜å…±çŠ¯ï¼ˆäººé ­å¸³æˆ¶ï¼‰", C: "éŠ€è¡ŒVIPå®¢æˆ¶", D: "æ¦®è­½å¸‚æ°‘" } },
            { q: "é‡å°é›¢è·åŒä»çš„é‚€ç´„ï¼Œä¸¦æ‰“è½å‹¤å‹™å…§å®¹ç­‰æ©Ÿæ•è³‡æ–™ï¼Œç¾è·åŒä»æ‡‰æŠ±æŒä½•ç¨®æ…‹åº¦ï¼Ÿ", a: "B", p: "åŒä»å¦‚é‡å·²é€€é›¢è·åŒä»äº‹é‚€ç´„é£²å®´...è«‹æé«˜è­¦è¦ºï¼Œåˆ‡å‹¿å› æŠ•è³‡æ©Ÿæœƒé™ä½è­¦è¦ºå¿ƒã€‚", o: { A: "ç„¡æ¢ä»¶ä¿¡ä»»", B: "æé«˜è­¦è¦ºï¼Œåˆ‡å‹¿å› ã€Œå¥½åº·ã€é™ä½è­¦è¦ºå¿ƒ", C: "ç«‹å³ç­”æ‡‰ä»¥ç¶­ç¹«æ„Ÿæƒ…", D: "é‚€è«‹æ›´å¤šåŒäº‹åƒåŠ " } },
            { q: "è‹¥å…¬å‹™å“¡å› è·å‹™æ¥è§¸å¤§é™¸äººå£«ï¼Œå¿…é ˆæ¡å–ä»€éº¼è¡Œå‹•ï¼Ÿ", a: "B", p: "å› å…¬å‹™æˆ–æ¥­å‹™éœ€è¦èˆ‡å¤§é™¸äººå£«æ¥è§¸ï¼Œå¿…é ˆå‘æœå‹™å–®ä½å ±å‘Šï¼Œåˆ‡å‹¿ç§è‡ªè¯ç¹«ã€‚", o: { A: "ç§ä¸‹ä¿æŒè¯çµ¡", B: "å‘æœå‹™å–®ä½å ±å‘Šï¼Œåˆ‡å‹¿ç§è‡ªè¯ç¹«", C: "é‚€è«‹å°æ–¹åƒè§€è¾¦å…¬å®¤", D: "æ”¶å—å°æ–¹é¤½è´ˆ" } },
            { q: "æ ¹æ“šã€Šåœ‹å®¶å®‰å…¨æ³•ã€‹ç¬¬2æ¢è¦å®šï¼Œä¸å¾—ç‚ºå“ªäº›å°è±¡åˆºæ¢ã€è’é›†ã€äº¤ä»˜å…¬å‹™ä¸Šæ‡‰ç§˜å¯†ä¹‹æ–‡æ›¸ï¼Ÿ", a: "A", p: "åœ‹å®¶å®‰å…¨æ³•è¦å®šç¯„åœåŒ…æ‹¬å¤–åœ‹ã€å¤§é™¸åœ°å€ã€é¦™æ¸¯ã€æ¾³é–€åŠå¢ƒå¤–æ•µå°å‹¢åŠ›ã€‚", o: { A: "å¤–åœ‹ã€å¤§é™¸åœ°å€ã€é¦™æ¸¯ã€æ¾³é–€ã€å¢ƒå¤–æ•µå°å‹¢åŠ›", B: "åƒ…é™å¤§é™¸åœ°å€", C: "åƒ…é™å¤–åœ‹", D: "åƒ…é™çŠ¯ç½ªçµ„ç¹”" } },
            { q: "é—œæ–¼èˆ‡ç¶²å‹ç™¼ç”Ÿè¦ªå¯†é—œä¿‚ï¼Œä¸‹åˆ—å“ªé …é¢¨éšªè§€å¿µæ˜¯æ­£ç¢ºçš„ï¼Ÿ", a: "B", p: "åˆ‡å‹¿èˆ‡æœªæˆå¹´äººç™¼ç”Ÿæ€§è¡Œç‚ºï¼Œå³ä¾¿ç•¶äº‹äººåŒæ„äº¦é•ååˆ‘æ³•ç¬¬227æ¢ã€‚", o: { A: "åªè¦å°æ–¹å¤–è¡¨çœ‹èµ·ä¾†æˆå¹´å³å¯", B: "å³ä½¿é›™æ–¹åˆæ„ï¼Œè‹¥å°æ–¹æœªæ»¿16æ­²ä»å¯èƒ½æ§‹æˆçŠ¯ç½ª", C: "åªè¦ä¸æ‹å½±ç‰‡å°±æ²’äº‹", D: "åªè¦çµ¦éŒ¢å°±ä¸ç®—çŠ¯ç½ª" } },
            { q: "å…©æ€§äº¤å¾€è‹¥é‡ç³¾ç´›ï¼Œæ‡‰å¦‚ä½•è™•ç†è¼ƒç‚ºé©ç•¶ï¼Ÿ", a: "B", p: "å€˜å› äº¤å‹è¡ç”Ÿç³¾ç´›æˆ–é­äººæåš‡ï¼Œåˆ‡å‹¿ç§ä¸‹è§£æ±º...æ‡‰å‘éšŠéƒ¨åæ‡‰ä¸¦é€šå ±è­¦å¯Ÿè™•ç†ã€‚", o: { A: "ç§ä¸‹çµ¦ä»˜å°å£è²»", B: "å‘éšŠéƒ¨åæ‡‰ä¸¦å°‹æ±‚æ³•å¾‹å”åŠ©", C: "æ‰¾å…„å¼Ÿå»è«‡åˆ¤", D: "é¿ä¸è¦‹é¢" } },
            { q: "ç‚ºä½•ç‰¹åˆ¥æé†’åŒä»é¿å…ä½¿ç”¨ BT ç­‰é»å°é»ä¸‹è¼‰è»Ÿé«”è§€çœ‹å½±éŸ³æª”æ¡ˆï¼Ÿ", a: "C", p: "BT è»Ÿé«”çš„ç‰¹æ€§æ˜¯å°‡ç¡¬ç¢Ÿå…§çš„è³‡æ–™ä¸Šå‚³å…±äº«ï¼Œå…·å‚™æ¥µé«˜çš„è³‡è¨Šå®‰å…¨å¤–æ´©é¢¨éšªã€‚", o: { A: "BT ä¸‹è¼‰æœƒç›´æ¥å°è‡´å…¬å‹™å¸³è™Ÿè¢«é–å®š", B: "æ­¤é¡è»Ÿé«”æœƒè‡ªå‹•åµæ¸¬ä¸¦åˆªé™¤å…¬å‹™æ–‡ä»¶", C: "ä¸‹è¼‰åŒæ™‚ä¹Ÿæœƒä¸Šå‚³ï¼Œå®¹æ˜“é€ æˆé›»è…¦å…§è³‡æ–™å¤–æ´©", D: "æ”¿åºœè¦å®šåŒä»ä¼‘å‡æœŸé–“ä¸å¾—ä½¿ç”¨é›»è…¦ä¸‹è¼‰" } },
            { q: "æ ¹æ“šã€Šåœ‹å®¶å®‰å…¨æ³•ã€‹ç¬¬ 2 æ¢è¦å®šï¼ŒåŒä»å°æ–¼ã€Œå…¬å‹™ä¸Šæ‡‰ç§˜å¯†è³‡æ–™ã€çš„èªçŸ¥æ‡‰åŒ…æ‹¬å“ªäº›ç¯„ç–‡ï¼Ÿ", a: "D", p: "åœ‹å®¶å®‰å…¨æ³•è¦å®šçš„ç¯„åœå»£æ³›ï¼Œä¸åƒ…é™åœ‹é˜²ç§˜å¯†ï¼Œäº¦åŒ…å«æ³•å¾‹è¦å®šçš„è¡Œæ”¿ç§˜å¯†ã€‚", o: { A: "åƒ…é™æ–¼æ¨™è¨»ã€Œæ¥µæ©Ÿå¯†ã€ä»¥ä¸Šçš„è»äº‹æ–‡æ›¸", B: "å·²é›¢è·åŒä»æ‰€æŒæœ‰çš„è³‡æ–™å³ä¸å±¬æ–¼æ‡‰ç§˜å¯†ç¯„ç–‡", C: "åªè¦ä¸æ˜¯ç´™æœ¬æ–‡ä»¶ï¼Œé›»å­éƒµä»¶å…§å®¹çš†ä¸åœ¨ä¿è­·ç¯„åœå…§", D: "ä¸åƒ…é™æ–¼ã€Œåœ‹é˜²ç§˜å¯†ã€ï¼Œäº¦åŒ…å«æ³•å¾‹è¦å®šçš„ã€Œè¡Œæ”¿ç§˜å¯†ã€" } },
            { q: "é‡å°é˜²ç¯„ã€Œæ€§å‹’ç´¢ã€èˆ‡ã€Œç¶²è·¯è©é¨™ã€ï¼Œä¸‹åˆ—å“ªä¸€é …ã€Œé˜²æ²»æªæ–½ã€æœ€èƒ½è½å¯¦é¢¨éšªæ§ç®¡ï¼Ÿ", a: "A", p: "çµ•å°ç¦æ­¢å‚³é€ä»»ä½•ç§å¯†å½±åƒäºˆç¶²å‹æ˜¯é˜²ç¯„æ€§å‹’ç´¢æœ€æ ¹æœ¬ä¸”ç›´æ¥çš„å®‰å…¨ä½œç‚ºã€‚", o: { A: "çµ•å°ç¦æ­¢å‚³é€ä»»ä½•ç§å¯†å½±åƒäºˆç¶²å‹", B: "åƒ…åœ¨é…’å¾Œæˆ–æƒ…ç·’ä¸ç©©æ™‚æ‰ä½¿ç”¨åŒ¿åè»Ÿé«”èŠå…¬äº‹", C: "å°‡æ‰€æœ‰å…¬å‹™å¸³è™Ÿå¯†ç¢¼è¨­ç‚ºç›¸åŒä»¥æ–¹ä¾¿è¨˜æ†¶", D: "èˆ‡ç¶²å‹äº’å‹•æ™‚ï¼Œæ‡‰å…ˆè¦æ±‚æª¢è¦–å°æ–¹çš„èº«åˆ†è­‰ä»¶" } },
            { q: "å¸é£Ÿå«æœ‰ã€Œä¾è¨—å’ªé…¯ã€ï¼ˆå–ªå±è¸å½ˆï¼‰çš„é›»å­è¸å±¬æ–¼ä¸‹åˆ—å“ªç¨®é•æ³•è¡Œç‚ºï¼Ÿ", a: "B", p: "ä¾è¨—å’ªé…¯å·²è¢«æ¯’å“å±å®³é˜²åˆ¶æ¢ä¾‹åˆ—ç‚ºç¬¬äºŒç´šæ¯’å“ï¼Œå¸é£Ÿå³å±¬é•æ³•ã€‚", o: { A: "åªè¦ä¸åœ¨å…¬å‹™å ´æ‰€å¸é£Ÿå³ä¸é•æ³•", B: "å¸é£Ÿå«ç¬¬äºŒç´šæ¯’å“æˆåˆ†ä¹‹è¸å“", C: "å±¬æ–¼åˆæ³•çš„å¿ƒç†å£“åŠ›æŠ’è§£é€”å¾‘", D: "åƒ…é•åè¸å®³é˜²åˆ¶æ³•ï¼Œç„¡åˆ‘äº‹æˆ–ç½°é°è²¬ä»»" } },
            { q: "æ´©æ¼æˆ–äº¤ä»˜é—œæ–¼ä¸­è¯æ°‘åœ‹åœ‹é˜²ä»¥å¤–æ‡‰ç§˜å¯†ä¹‹æ–‡æ›¸ï¼Œè§¸çŠ¯ã€Šåˆ‘æ³•ã€‹ç¬¬å¹¾æ¢ï¼Ÿ", a: "B", p: "ã€Šåˆ‘æ³•ç¬¬132æ¢ã€‹ï¼šæ´©æ¼åœ‹é˜²ä»¥å¤–ç§˜å¯†ç½ªã€‚è‹¥æ˜¯åœ‹é˜²ç§˜å¯†å‰‡æ¶‰åŠ109æ¢ã€‚", o: { A: "ç¬¬109æ¢", B: "ç¬¬132æ¢", C: "ç¬¬339æ¢", D: "ç¬¬213æ¢" } }
        ];

        let currentQuizQuestions = [];
        let currentQIndex = 0;
        let currentSlideIndex = 0;
        let score = 0;

        // ç•«é¢åˆ‡æ›
        function showScreen(screenId) {
            document.querySelectorAll('#game-box > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(screenId).classList.remove('hidden');
            document.getElementById('game-box').classList.remove('shake');
            document.getElementById('game-box').className = '';
        }

        // --- åœ–ç‰‡æ’­æ”¾é‚è¼¯ ---
        function startSlideshow() {
            showScreen('screen-slides');
            currentSlideIndex = 0;
            updateSlideDisplay();
        }

        function changeSlide(direction) {
            const slides = document.querySelectorAll('.slide-img');
            
            if (currentSlideIndex === slides.length - 1 && direction === 1) {
                startQuiz();
                return;
            }

            currentSlideIndex += direction;
            if (currentSlideIndex < 0) currentSlideIndex = 0;
            if (currentSlideIndex >= slides.length) currentSlideIndex = slides.length - 1;
            
            updateSlideDisplay();
        }

        function updateSlideDisplay() {
            const slides = document.querySelectorAll('.slide-img');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            slides.forEach((s, i) => {
                s.style.display = (i === currentSlideIndex) ? 'block' : 'none';
            });
            
            document.getElementById('current-slide-num').innerText = currentSlideIndex + 1;
            prevBtn.style.visibility = (currentSlideIndex === 0) ? 'hidden' : 'visible';
            
            if (currentSlideIndex === slides.length - 1) {
                nextBtn.innerText = "é–‹å§‹æ¸¬é©—";
                nextBtn.style.backgroundColor = "var(--success)";
            } else {
                nextBtn.innerText = "ä¸‹ä¸€å¼µ";
                nextBtn.style.backgroundColor = "var(--cg-orange)";
            }
        }

        // --- æ¸¬é©—é‚è¼¯ ---
        function startQuiz() {
            showScreen('screen-quiz');
            score = 0;
            currentQIndex = 0;
            document.getElementById('current-score').innerText = score;
            currentQuizQuestions = [...questionsData].sort(() => Math.random() - 0.5);
            loadQuestion();
        }

        function loadQuestion() {
            const q = currentQuizQuestions[currentQIndex];
            document.getElementById('q-progress').innerText = currentQIndex + 1;
            document.getElementById('q-content').innerText = q.q;
            document.getElementById('explanation-box').style.display = 'none';
            document.getElementById('next-q-btn').classList.add('hidden');
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            Object.entries(q.o).forEach(([key, value]) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `<strong>${key}.</strong> ${value}`;
                btn.onclick = () => selectOption(key, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function selectOption(choice, selectedBtn) {
            const q = currentQuizQuestions[currentQIndex];
            const isCorrect = choice === q.a;
            const buttons = document.querySelectorAll('.option-btn');
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰éˆ•
            buttons.forEach(b => b.disabled = true);

            if (isCorrect) {
                score += 5;
                document.getElementById('current-score').innerText = score;
                selectedBtn.style.backgroundColor = "#d4edda";
                selectedBtn.style.borderColor = "var(--success)";
                triggerEffect('ğŸ‘', 'clap');
                
                // ç­”å°å‰‡çŸ­æš«åœé “å¾Œè‡ªå‹•ä¸‹ä¸€é¡Œ
                setTimeout(() => proceedToNextQuestion(), 1000);
            } else {
                selectedBtn.style.backgroundColor = "#f8d7da";
                selectedBtn.style.borderColor = "var(--danger)";
                
                // æ¨™ç¤ºæ­£ç¢ºç­”æ¡ˆ
                buttons.forEach(b => {
                    if (b.innerText.startsWith(q.a)) {
                        b.style.border = "3px solid var(--success)";
                    }
                });

                triggerEffect('ğŸ’¥', 'explode');
                document.getElementById('game-box').classList.add('shake');
                setTimeout(() => document.getElementById('game-box').classList.remove('shake'), 400);

                // é¡¯ç¤ºè§£æ
                showExplanation(q.p);
            }
        }

        function showExplanation(text) {
            const explBox = document.getElementById('explanation-box');
            const explText = document.getElementById('expl-text');
            const nextBtn = document.getElementById('next-q-btn');
            
            explText.innerText = text;
            explBox.style.display = 'block';
            nextBtn.classList.remove('hidden');
        }

        function proceedToNextQuestion() {
            currentQIndex++;
            if (currentQIndex < currentQuizQuestions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function triggerEffect(emoji, animClass) {
            const overlay = document.getElementById('effect-overlay');
            overlay.innerHTML = `<span class="${animClass}">${emoji}</span>`;
            setTimeout(() => overlay.innerHTML = '', 1000);
        }

        // --- æˆç¸¾çµç®— ---
        function showResult() {
            showScreen('screen-result');
            const box = document.getElementById('game-box');
            const msg = document.getElementById('result-message');
            const circle = document.getElementById('score-circle');
            
            circle.innerText = score;

            if (score >= 60) {
                box.classList.add('pass-screen');
                circle.style.borderColor = 'var(--success)';
                circle.style.color = 'var(--success)';
                msg.innerText = "æ­å–œæ‚¨!ä½ æ˜¯æ¸…å»‰çš„æµ·å·¡è‹±é›„!";
                createConfetti();
            } else {
                box.classList.add('fail-screen');
                circle.style.borderColor = 'var(--cg-orange)';
                circle.style.color = 'var(--cg-orange)';
                msg.innerText = "å¥½å¯æƒœ~è«‹å†æ¬¡é–±è®€è‰¦éšŠåˆ†ç½²é˜²è²ªæŒ‡å¼•æ‰‹å†Š!";
            }
        }

        function createConfetti() {
            const colors = ['#f2d74e', '#95c3de', '#ff9a91', '#f2cf66', '#4897f1'];
            for (let i = 0; i < 50; i++) {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.style.left = Math.random() * 100 + 'vw';
                c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                c.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 4000);
            }
        }

        function retryQuiz() {
            startSlideshow();
        }

        function goHome() {
            showScreen('screen-start');
        }
    </script>
</body>
</html>
